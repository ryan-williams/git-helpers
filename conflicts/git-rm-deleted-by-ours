#!/usr/bin/env bash
# Remove files that were deleted by "ours" during a conflict (status DU)
set -eo pipefail

files=()
while IFS= read -r file; do
    [ -n "$file" ] && files+=("$file")
done < <(git list-status DU)

if [ ${#files[@]} -eq 0 ]; then
    echo "No files deleted by ours" >&2
    exit 0
fi

echo "Removing ${#files[@]} file(s) deleted by ours:" >&2
printf '  %s\n' "${files[@]}" >&2

git rm -f -- "${files[@]}"
